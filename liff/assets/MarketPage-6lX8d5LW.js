import{r as f,j as e,c as d,P as v,T as n,o as I,D as C,p as B,f as K,d as W,v as M,e as T,n as w}from"./main-DAl8Fc_T.js";import{a as R,F,u as U,b as S,D as A,R as O,S as N,s as E}from"./MethodPage.module-DxAklF9Y.js";import"./preload-helper-Ct5FWWRu.js";const j={KAIA:10,USD:1e3},H=t=>({src:`https://vos.line-scdn.net/minidapp-demo-web-prod/minidapp-demo-web/sample_item_${t}.webp`,alt:`Sample Item ${t}`,name:`LINEâ€™s Mini Dapp Demo 
Item ${t}`,printPrice:s=>s==="KAIA"?`${j[s]} KAIA`:s==="USD"?`USD ${j[s]/1e3}`:""}),L="_02d572df",q={root:L},Y=f.forwardRef(function({className:s,...c},r){return e.jsx("input",{ref:r,type:"checkbox",className:d(q.root,s),...c})}),z="_7137fbcf",G="bf53670b",J="_66140904",Q="_15e379a4",V="_41974a2d",X="_1e803575",Z="b9eaad43",ee="_0462052e",o={root:z,buttonWrap:G,title:J,name:Q,price:V,img:X,button:Z,agree:ee},te=({closeButton:t=!1,className:s,alt:c,src:r,priceString:m,name:u,...x})=>{const p=R(),[_,h]=p.watch(["agree1","agree2"]),b=()=>{};return e.jsxs(v,{className:d(o.root,B.root,s),closeButton:t,...x,children:[e.jsx(n,{name:"DD_common_purchase_title",className:o.title,parent:"h3","aria-label":"title"}),e.jsx("img",{alt:c,src:r,className:o.img}),e.jsx("h5",{className:o.name,children:u}),e.jsx("span",{className:o.price,children:m}),e.jsx(F,{...p,children:e.jsxs("form",{onSubmit:p.handleSubmit(b),children:[e.jsxs("div",{className:o.buttonWrap,children:[e.jsx(I,{disabled:!(_&&h),className:o.button,children:e.jsx(n,{name:"DD_common_buy_button"})}),e.jsx(C,{className:d(o.button,o.dismiss),children:e.jsx(n,{name:"DD_common_cancel_button"})})]}),e.jsxs("div",{children:[e.jsx(g,{type:"agree1"}),e.jsx(g,{type:"agree2"})]})]})})]})},g=({type:t})=>{const{register:s}=U();return e.jsxs("label",{htmlFor:t,className:o.agree,children:[e.jsx(Y,{id:t,...s(t)}),e.jsx(n,{name:`DD_common_purchase_${t}`})]})},se="_1b9aa7f8",ae="_44c86512",ne="a448d6be",oe="acb5572b",ce="_8a5d2bca",re="_69242d05",ie="db606e42",i={root:se,imgWrap:ae,img:ne,name:oe,buttonWrap:ce,button:re,helper:ie},y=({type:t})=>{const{open:s}=K(),{src:c,printPrice:r,name:m,alt:u}=H(t),x=W(l=>l.selectedWalletAddress),{startPayment:p}=S(),_=r("KAIA"),h=r("USD"),b=l=>{const $=l==="KAIA"?_:h;s(e.jsx(te,{name:m,alt:u,src:c,priceString:$,closeButton:!0})).then(async({dismissed:P})=>{if(P||!x)return;const D=j[l],k=m.replace(`
`,"");await p({buyerDappPortalAddress:x,pgType:l==="KAIA"?"CRYPTO":"STRIPE",currencyCode:l,price:D,items:[{itemIdentifier:`Test_Sample_Item_${M()}`,name:k,imageUrl:c,price:D.toString(),currencyCode:l}],testMode:!0})})};return e.jsxs("div",{className:i.root,children:[e.jsxs("div",{className:i.imgWrap,children:[e.jsx(n,{name:"DD_common_purchase_guide",className:i.helper}),e.jsx("img",{src:c,alt:u,className:i.img})]}),e.jsx("h5",{className:i.name,children:m}),e.jsxs("div",{className:i.buttonWrap,children:[e.jsx("button",{className:i.button,onClick:()=>b("KAIA"),children:_}),e.jsx("button",{className:i.button,onClick:()=>b("USD"),children:h})]})]})},me="_4fff7a4a",le="_3476a42f",de="_062bc6dd",pe="f74de7cd",ue="e2cf1670",xe="_64507890",_e="_6723946f",he="ad7c26b7",a={root:me,title:le,description:de,buttonWrap:pe,itemsTOS:ue,itemsButtonWrap:xe,paymentButtonWrap:_e,cardWrap:he},be=()=>e.jsxs("div",{className:a.root,children:[e.jsx(n,{name:"DD_common_item_title",parent:"h4",className:a.title}),e.jsx(n,{parent:"p",name:"DD_common_item_desc1",className:a.description}),e.jsxs("ul",{className:d(a.description,a.itemsTOS),children:[e.jsx(n,{name:"DD_common_item_desc2",parent:"li"}),e.jsx(n,{name:"DD_common_item_desc3",parent:"li"})]}),e.jsx("div",{className:d(a.buttonWrap,a.itemsButtonWrap),children:e.jsx(A,{url:"https://docs.dappportal.io/mini-dapp/mini-dapp-sdk/payment-provider/policy/refund#refund-policy"})}),e.jsxs("div",{className:a.cardWrap,children:[e.jsx(y,{type:"A"}),e.jsx(y,{type:"B"})]})]}),je=()=>{const t=W(m=>m.selectedWalletAddress),{openPaymentHistory:s}=S(),{requestAccount:c}=T(),r=f.useCallback(async()=>{t||await c(),await s()},[t]);return e.jsxs("div",{className:a.root,children:[e.jsx(n,{name:"DD_common_paymentHistory_title",parent:"h4",className:a.title}),e.jsx(n,{parent:"p",name:"DD_common_paymentHistory_desc",className:a.description}),e.jsxs("div",{className:d(a.buttonWrap,a.paymentButtonWrap),children:[e.jsx(A,{url:"https://docs.dappportal.io/mini-dapp/mini-dapp-sdk/payment-provider"}),e.jsx(O,{xltKey:"DD_common_historycheck_button",onClick:r})]})]})},ye=()=>e.jsxs("div",{className:d(E.root,w.tabPageRoot),children:[e.jsx(N,{id:"items",children:e.jsx(be,{})}),e.jsx(N,{id:"payment-history",children:e.jsx(je,{})})]});export{ye as MarketPage};
